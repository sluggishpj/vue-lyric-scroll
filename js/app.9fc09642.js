(function(t){function e(e){for(var r,c,s=e[0],o=e[1],l=e[2],h=0,f=[];h<s.length;h++)c=s[h],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&f.push(n[c][0]),n[c]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],r=!0,s=1;s<i.length;s++){var o=i[s];0!==n[o]&&(r=!1)}r&&(a.splice(e--,1),t=c(c.s=i[0]))}return t}var r={},n={app:0},a=[];function c(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=t,c.c=r,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(i,r,function(e){return t[e]}.bind(null,r));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/vue-lyric-scroll/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=o;a.push(["a1ec","chunk-vendors"]),i()})({"10a6":function(t,e,i){"use strict";var r=i("2239"),n=i.n(r);n.a},2239:function(t,e,i){var r=i("c0c6");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("499e").default;n("083e20ef",r,!0,{sourceMap:!1,shadowMode:!1})},a1ec:function(t,e,i){"use strict";i.r(e);var r=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"audio-wrapper"},[i("audio",{ref:"audio",staticClass:"music-player",attrs:{controls:"",src:t.musicSrc,loop:!0},on:{timeupdate:t.timeupdate}})]),i("div",{staticClass:"lyric"},[i("LyricScroll",{attrs:{lyric:t.lyric,"t-lyric":t.tLyric,"lyric-active-class":"lyric-active","lyric-center-class":"lyric-center","triangle-width":"14px","triangle-color":"#fff","center-line-color":"#fff","center-time-color":"#fff","current-time":t.currentTime},on:{"change-current-time":t.handleChangeCurrentTime}})],1)])},a=[],c=(i("4160"),i("c975"),i("fb6a"),i("a9e3"),i("ac1f"),i("1276"),i("159b"),{name:"demo",data:function(){return{musicSrc:"https://f000.backblazeb2.com/file/j-assets/wispering+-+%E5%A4%A9%E3%83%8E%E5%BC%B1+piano+ver.mp3",originLyric:"",originTLyric:"",currentTime:0}},computed:{lyric:function(){return this.lyricToObj(this.originLyric)},tLyric:function(){return this.lyricToObj(this.originTLyric)}},methods:{timeStrToNum:function(t){var e=Number(t.slice(0,2)),i=Number(t.slice(3,5)),r=Number(t.slice(6,8));return 60*e+i+r/100},lyricToObj:function(t){var e,i,r=this,n={};return t.split("\n").forEach((function(t,a){e=t.slice(t.indexOf("]")+1),e&&(i=r.timeStrToNum(t.slice(1,9)),n[i]=e)})),n},timeupdate:function(){this.changeCurrentTime(this.$refs.audio.currentTime)},changeCurrentTime:function(t){this.currentTime=t},handleChangeCurrentTime:function(t){this.$refs.audio.currentTime=t}},mounted:function(){this.originLyric="[by:秋锋客]\n[00:15.460]仆がずっと前から思ってる事を话そうか\n[00:22.250]友达に戻れたらこれ以上はもう望まないさ\n[00:29.020]君がそれでいいなら仆だってそれで构わないさ\n[00:36.010]嘘つきの仆が吐いた はんたいことばの爱のうた\n[00:47.360]\n[00:56.820]今日はこっちの地方はどしゃぶりの晴天でした\n[01:03.690]昨日もずっと暇で一日満喫してました\n[01:10.560]别に君のことなんて考えてなんかいないさ\n[01:17.530]いやでもちょっと本当は考えてたかもなんて\n[01:24.510]メリーゴーランドみたいに\n[01:29.240]仆の头ん中はもうグルグルさ\n[01:34.760]\n[01:35.310]この両手から零れそうなほど\n[01:42.130]君に贳った爱はどこに舍てよう\n[01:48.990]限りのある消耗品なんて仆は\n[02:00.040]要らないよ\n[02:03.230]\n[02:03.620]仆がずっと前から思ってる事を话そうか\n[02:10.240]姿は见えないのに言叶だけ见えちゃってるんだ\n[02:17.220]仆が知らないことがあるだけで気が狂いそうだ\n[02:24.060]ぶら下がった感情が 绮丽なのか汚いのか\n[02:30.780]\n[02:31.370]仆にはまだわからず舍てる宛てもないんだ\n[02:44.870]言叶の裏の裏が见えるまで待つからさ\n[02:51.760]待つくらいならいいじゃないか\n[02:58.030]\n[02:58.530]进む君と止まった仆の\n[03:05.300]缩まらない隙を何で埋めよう\n[03:12.020]まだ素直に言叶に出来ない仆は\n[03:23.480]天性の弱虫さ\n[03:25.920]\n[03:26.320]この両手から零れそうなほど\n[03:33.090]君に渡す爱を谁に譲ろう\n[03:39.760]そんなんどこにも宛てがあるわけないだろ\n[03:51.020]まだ待つよ\n[03:58.680]\n[03:59.930]もういいかい/\n[04:12.620]\n",this.originTLyric="[by:青菜茄茄酱]\n[00:15.460]我来告诉你我一直以来所想的事吧\n[00:22.250]能回到朋友关系的话我就别无所求了\n[00:29.020]如果你无所谓的话那我也没关系\n[00:36.010]骗子的我所吐出的　相反词的情歌\n[00:56.820]今日附近地区是倾盆大雨的大晴天\n[01:03.690]昨天也是一整天都很闲的充实一天\n[01:10.560]我又没有在想你的事情\n[01:17.530]不对 其实搞不好有想那麽一点点\n[01:24.510]像旋转木马那样旋转\n[01:29.240]我的脑袋也转啊转的\n[01:35.310]几乎要自两手中洒出的\n[01:42.130]你所给的爱要扔到哪好？\n[01:48.990]这种有限的消耗品\n[02:00.040]我可不要\n[02:03.620]我来告诉你我一直以来所想的事吧\n[02:10.240]明明看不到身影却只能看见词语\n[02:17.220]只要有我所不知道的事情就几乎要疯掉\n[02:24.060]唾手可得的感情　是干净还是肮脏\n[02:31.370]我还不知道　也没地方可丢弃\n[02:44.870]我会等到能够看到言语的反面的反面那时\n[02:51.760]如果只是等待的话那也不错啊\n[02:58.530]前进的你与停步的我\n[03:05.300]不会缩短的缝隙该填什麽进去？\n[03:12.020]仍然无法直率的说出口的我\n[03:23.480]是天生的胆小鬼\n[03:26.320]几乎要自两手中洒出的\n[03:33.090]交给你的爱要让给谁好？\n[03:39.760]我看根本没人可让吧\n[03:51.020]还在等待\n[03:59.930]可以了吗\n"}}),s=c,o=(i("10a6"),i("2877")),l=Object(o["a"])(s,n,a,!1,null,null,null),u=l.exports,h=(i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"lyricView",staticClass:"lyric-view",on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd}},[this.lyric?i("div",{ref:"lyricWrapper",staticClass:"lyric-wrapper",style:{transform:"translate3d(0, "+t.nowTranslateY+"px, 0)",transition:t.isDragging?"none":"all ease "+t.lyricScrollTime+"ms"}},t._l(t.allLyric,(function(e,r){var n;return i("div",{key:r,ref:"lyricLine",refInFor:!0,class:(n={},n[t.lyricCenterClass]=r===t.centerLyricIdx,n[t.lyricActiveClass]=r===t.activeLyricIdx,n),style:{padding:t.unitDivide(t.lyricMargin,2)+" 0"}},[i("p",{style:{lineHeight:t.lyricLineheight}},[t._v(t._s(e[1]))]),e[2]?i("p",{style:{lineHeight:t.lyricLineheight}},[t._v(t._s(e[2]))]):t._e()])})),0):t._e(),t.isDragging?i("div",{staticClass:"center-mark"},[i("div",{staticClass:"triangle",style:{borderColor:"transparent transparent transparent "+t.triangleColor,borderWidth:t.unitDivide(t.triangleWidth,1.732)+" 0 "+t.unitDivide(t.triangleWidth,1.732)+" "+t.triangleWidth},on:{click:t.changeCurrentTime}}),i("div",{staticClass:"line",style:{background:t.centerLineColor}}),i("div",{staticClass:"target-time",style:{color:t.centerTimeColor}},[t._v(t._s(t.allLyric[t.centerLyricIdx]&&t.timeToStr(t.allLyric[t.centerLyricIdx][0])))])]):t._e()])}),f=[],d=(i("99af"),i("5319"),{name:"LyricScroll",props:{currentTime:{type:Number,required:!0},lyric:{type:Object,required:!0},tLyric:{type:Object,default:function(){return null}},lyricActiveClass:String,lyricCenterClass:String,lyricScrollTime:{type:Number,default:400},dragendWaitTime:{type:Number,default:3e3},lyricMargin:{type:String,default:"20px"},lyricLineheight:{type:String,default:"1.5em"},triangleColor:{type:String,default:"orange"},triangleWidth:{type:String,default:"40px"},centerLineColor:{type:String,default:"#ccc"},centerTimeColor:{type:String,default:"orange"}},data:function(){return{startClientY:0,startTranslateY:0,isDragging:!1,nowTranslateY:0,timer:null,centerLyricIdx:-1,offsetHeightList:[],wrapper:null,wrapperHeight:0,viewHeight:0}},mounted:function(){this.wrapper=this.$refs.lyricWrapper,this.viewHeight=this.$refs.lyricView.offsetHeight},computed:{allLyric:function(){var t=[];if(null!==this.tLyric)for(var e in this.lyric)t.push([Number(e),this.lyric[e],this.tLyric[e]]);else for(var i in this.lyric)t.push([Number(i),this.lyric[i]]);return t.sort((function(t,e){return t[0]-e[0]})),t},offsetTopList:function(){var t=this,e=[],i=0;return this.$refs.lyricLine.forEach((function(r){var n=r.offsetHeight;t.offsetHeightList.push(n),e.push(i),i+=n})),e},activeLyricIdx:function(){for(var t=this.allLyric,e=this.currentTime,i=0,r=t.length;i<r;i++)if(t[i][0]<=e&&(t[i+1]&&t[i+1][0]>e||!t[i+1]))return i;return 0},lyricTopPadding:function(){return this.viewHeight/2-this.firstLyricHeight/2},lyricBottomPadding:function(){return this.viewHeight/2-this.lastLyricHeight/2},minTranslateY:function(){return-(this.wrapperHeight-this.viewHeight+this.lyricBottomPadding)}},methods:{unitDivide:function(t,e){var i=parseFloat(t),r=t.replace(i,"");return"".concat(i/e).concat(r)},timeToStr:function(t){t=Math.round(t);var e=t%60,i=Math.floor(t/60);return e<10&&(e="0"+e),i<10&&(i="0"+i),i+":"+e},setFirstLastLyricHeight:function(){var t=this.$refs.lyricLine;this.firstLyricHeight=t[0].offsetHeight,this.lastLyricHeight=t[t.length-1].offsetHeight},changeCurrentTime:function(){var t=this;this.$emit("change-current-time",this.allLyric[this.centerLyricIdx][0]),this.$nextTick((function(){t.isDragging=!1}))},getTranslateY:function(t){var e=window.getComputedStyle(t),i=e.transform||e.webkitTransform;return i.split(",")[5].replace(")","")},updateLyricPos:function(){if(!this.isDragging){var t=this.activeLyricIdx,e=this.offsetTopList[t]+this.offsetHeightList[t]/2-this.viewHeight/2;this.nowTranslateY=-e}},onTouchStart:function(t){this.isDragging=!0,clearTimeout(this.timer),this.startClientY=t.touches[0].clientY,this.startTranslateY=Number(this.getTranslateY(this.wrapper)),this.nowTranslateY=this.startTranslateY},onTouchMove:function(t){t.preventDefault();var e=t.touches[0].clientY,i=this.startTranslateY+e-this.startClientY;i>this.lyricTopPadding?this.nowTranslateY=this.lyricTopPadding:i<this.minTranslateY?this.nowTranslateY=this.minTranslateY:(this.nowTranslateY=i,this.centerLyricIdx=this.findCenterLyricIdx())},onTouchEnd:function(){var t=this;this.timer=setTimeout((function(){t.isDragging=!1,t.centerLyricIdx=-1}),this.dragendWaitTime)},findCenterLyricIdx:function(){for(var t=this.viewHeight/2,e=this.offsetTopList,i=this.nowTranslateY,r=0,n=e.length;r<n;r++){var a=e[r];if(i+a<t&&e[r+1]&&i+e[r+1]>t||!e[r+1])return r}}},watch:{currentTime:function(){this.updateLyricPos()},allLyric:function(t){var e=this;this.$nextTick((function(){e.setFirstLastLyricHeight(),e.wrapperHeight=e.$refs.lyricWrapper.offsetHeight,e.nowTranslateY=e.lyricTopPadding}))}}}),p=d,y=(i("dc75"),Object(o["a"])(p,h,f,!1,null,"e62195ea",null)),g=y.exports;g.install=function(t){t.component(g.name,g)},"undefined"!==typeof window&&window.Vue&&window.Vue.use(g);var m=g;r["a"].use(m),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(u)}}).$mount("#app")},a254:function(t,e,i){var r=i("cb4c");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("499e").default;n("38f12736",r,!0,{sourceMap:!1,shadowMode:!1})},c0c6:function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,"body,html{margin:0;padding:0}#app,body,html{width:100%;height:100%}#app{font-size:16px;display:grid;grid-template-rows:100px calc(100vh - 120px);background-color:#64363c;margin:0 auto}#app,.audio-wrapper{justify-content:center}.audio-wrapper{width:100%;display:flex;align-items:center}.lyric{width:100%;color:#adaaa8;border:1px dashed #ccc;box-sizing:border-box;text-align:center}.lyric-active{color:#fff!important}.lyric-center{color:#fff}",""]),t.exports=e},cb4c:function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,".lyric-view[data-v-e62195ea]{width:100%;height:100%;overflow:hidden;position:relative}.lyric-view .center-mark[data-v-e62195ea]{box-sizing:border-box;position:absolute;top:50%;transform:translateY(-50%);width:100%;display:flex;align-items:center}.lyric-view .center-mark .triangle[data-v-e62195ea]{border-style:solid}.lyric-view .center-mark .line[data-v-e62195ea]{flex:1;height:1px;margin:0 20px}.lyric-wrapper[data-v-e62195ea]{transition:.3s ease}.lyric-wrapper>div p[data-v-e62195ea]{padding:0;margin:0}",""]),t.exports=e},dc75:function(t,e,i){"use strict";var r=i("a254"),n=i.n(r);n.a}});